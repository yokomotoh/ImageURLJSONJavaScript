<html>
<head>
    <title>Famille Vincent</title>
    <style>
        #birds {
            width: 1000px;
            text-align: center;
            overflow: hidden;
            padding: 3px;
            font: 14px Calibri;
            border:solid 1px #ddd;
        }
        #birds div {
            margin: 0;
            width: 49%;
            float: left;
            text-align: center;
        }
        
        #birds div img {
            border: none;
            width: 200px;
            height: 200px;
        }
    
        #birds table {
            margin: 3px;
            width: 49%;
            float: left;
            text-align: center;
        }
        
        #birds table img {
            border: none;
            width: 300px;
            height: auto;
        }
    
        #largeImage {
          width: 500px;
          height: auto;
          position: absolute;
          left: 300px;
          top: 200px; /* Or perhaps different coordinates */
          display: none;
        }
    </style>
</head>
<body>
    <p> Click the button to see... </p>
    <p>
    <input type="button" onclick="showDataWithImages(this.value)" value="_Autoportraits" />
    <input type="button" onclick="showDataWithImages(this.value)" value="_Gravures_InfinisMonotypes" />
    <input type="button" onclick="showDataWithImages(this.value)" value="_pictures_Vincent_z 1 Famille Vincent 2005" />
    </p>
    <!--
    <div id='birds'></div>
    -->
    <p id='birds'></p>
    <!--
    <input type="button" onclick="CreateTableFromJSON()" value="Create Table From JSON" />
    <p id="showData"></p>
    -->
    <img id="largeImage" alt="">
</body>
<script>
    function showDataWithImages(json_name) {

        var oXHR = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject('Microsoft.XMLHTTP');

        function reportStatus() {
            if (oXHR.readyState == 4)               // Request completed.
                //showTheList(this.responseText);     // All set. Now show the data.
                CreateTableFromJSON(this.responseText)
        }

        oXHR.onreadystatechange = reportStatus;
        url = "http://www.vinsfinsmotohama.shop/photos/" + json_name + ".json"
        oXHR.open("GET", url, true);   // true = asynchronous request, false = synchronous request.
        oXHR.send();

        function showTheList(json) {
            var arrItems = [];
            arrItems = JSON.parse(json);     // Populate array with JSON data.

            var div = document.getElementById('birds');     // The parent <div>.
            div.innerHTML = '';

            // Loop through data in the JSON array.
            for (i = 0; i <= arrItems.length - 1; i++) {

                // Create two <div> elements, one for the name and the other to show the image.
                var divLeft = document.createElement('div');
                divLeft.innerHTML = arrItems[i].Name;

                var img = document.createElement('img');    // Create an <img> element.
                img.src = arrItems[i].Image;                // The image source from JSON array.

                var divRight = document.createElement('div');
                divRight.setAttribute('style', 'border-left: solid 1px #ddd;');
                divRight.appendChild(img);

                // Add the child DIVs to parent DIV.
                div.appendChild(divLeft);
                div.appendChild(divRight);

                // Note: Instead of <div>, you can also create a dynamic <table> to show the images.
                // Here's an example ... https://www.encodedna.com/javascript/populate-json-data-to-html-table-using-javascript.htm
                
            }
        }
        
        function CreateTableFromJSON(json) {
             // var arrItems = [];
             var arrItems = {};
             arrItems = JSON.parse(json);     // Populate array with JSON data.

             // EXTRACT VALUE FOR HTML HEADER.
             // ('Book ID', 'Book Name', 'Category' and 'Price')
             var col = [];
             //for (var i = 0; i < arrItems.length; i++) {
             for (var i in arrItems) {
                 for (var key in arrItems[i]) {
                 //for (var key in enumerate(arrItems[i])) {
                         if (col.indexOf(key) === -1) {
                         col.push(key);
                     }
                 }
             }

             // CREATE DYNAMIC TABLE.
             var table = document.createElement("table");

             // CREATE HTML TABLE HEADER ROW USING THE EXTRACTED HEADERS ABOVE.

             var tr = table.insertRow(-1);                   // TABLE ROW.

             for (var i = 0; i < col.length; i++) {
                 var th = document.createElement("th");      // TABLE HEADER.
                 th.innerHTML = col[i];
                 tr.appendChild(th);
             }

             // ADD JSON DATA TO THE TABLE AS ROWS.
             //for (var i = 0; i < arrItems.length; i++) {
             for (var i in arrItems) {

                 tr = table.insertRow(-1);

                 for (var j = 0; j < col.length; j++) {
                     var tabCell = tr.insertCell(-1);
                     
                     //if (col[j] === "Image") {
                     if (col[j] === "url") {
                         
                         var img = document.createElement('img');    // Create an <img> element.
                         img.src = arrItems[i].Image;                // The image source from JSON array.
                         img.src = arrItems[i].url;                // The image source from JSON array.

                         tabCell.setAttribute('style', 'border-left: solid 1px #ddd;');
                         
                         //img.onclick = function() {
                         //    window.location.href = img.src;
                         //};
                         
                         //img.addEventListener("click", function() {
                         //  console.log("clicked");
                         //})
                         
                         img.onclick = function() {
                             var largeImage = document.getElementById('largeImage');
                             largeImage.style.display = 'block';
                             //largeImage.style.width=200+"px";
                             //largeImage.style.height=200+"px";
                             //var url=largeImage.getAttribute('src');
                             var url = this.getAttribute('src');
                             //window.open(url,'Image', 'resizable=1');//,'width=largeImage.style.width,height=largeImage.style.height,resizable=1');
                             window.open(url,'url', 'resizable=1');//,'width=largeImage.style.width,height=largeImage.style.height,resizable=1');
                         };
                         
                         tabCell.appendChild(img);
                     }
                     else {
                         tabCell.innerHTML = arrItems[i][col[j]];
                     }
                 }
             }

             // FINALLY ADD THE NEWLY CREATED TABLE WITH JSON DATA TO A CONTAINER.
             //var divContainer = document.getElementById("showData");
             var divContainer = document.getElementById('birds');
             divContainer.innerHTML = "";
             divContainer.appendChild(table);
         }
        
    }
</script>
</html>
